<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<title>BuildingMap</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
       integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
       crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
       integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
       crossorigin=""></script>
	<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
	<style>
		#BuildingsMap { height: 800px; }
	</style>
  </head>
  <body>
    <p>
      <div id="BuildingsMap" />
    </p>
    <script>
      var buildingsMap = L.map('BuildingsMap');
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(buildingsMap);
	  $.ajaxSetup({
	    scriptCharset: "utf-8",
	    contentType: "application/json; charset=utf-8"
	  });
	  var districtCenter = function (arr) { 
		var arrToUse;
		if(arr.length == 1) {
		  arrToUse = arr[0];
		} else {
		  arrToUse = arr;
		}
		var center = arrToUse.reduce(function (x,y) {
		  return [x[0] + y[0] / arrToUse.length, x[1] + y[1] / arrToUse.length] 
		}, [0,0]) 
		return [center[1], center[0]];
	  };
	  $.getJSON("geojsons/districts/Neustadt-Neuschoenefeld.geojson", function(data) {
		var style = {
			weight: 2,
			color: 'blue',
			fillOpacity: 0.0
		}  
		var geoJsonLayer = L.geoJson(data, style);
		buildingsMap.addLayer(geoJsonLayer);
		geoJsonLayer.eachLayer(function (layer) {
			var coords = layer.feature.geometry.coordinates[0];
			var centroid = districtCenter(coords);
			var zoomLevel = 16;
			buildingsMap.setView(centroid, zoomLevel);	
		});
	  });
	  $.getJSON("geojsons/buildings/Neustadt-Neuschoenefeld-2019-buildings.geojson", function(data) {
		var style = {
			weight: 2,
			color: 'green',
			fillOpacity: 0.2
		}  
		var geoJsonLayer = L.geoJson(data, style);
		buildingsMap.addLayer(geoJsonLayer);
	  });
	  $.getJSON("geojsons/buildings/Neustadt-Neuschoenefeld-2018-buildings.geojson", function(data) {
		var style = {
			weight: 2,
			color: 'red',
			fillOpacity: 0.2
		}  
		var geoJsonLayer = L.geoJson(data, style);
		buildingsMap.addLayer(geoJsonLayer);
	  });
	  $.getJSON("geojsons/buildings/Neustadt-Neuschoenefeld-2017-buildings.geojson", function(data) {
		var style = {
			weight: 2,
			color: 'brown',
			fillOpacity: 0.2
		}  
		var geoJsonLayer = L.geoJson(data, style);
		buildingsMap.addLayer(geoJsonLayer);
	  });
	  $.getJSON("geojsons/buildings/Neustadt-Neuschoenefeld-2016-buildings.geojson", function(data) {
		var style = {
			weight: 2,
			color: 'yellow',
			fillOpacity: 0.2
		}  
		var geoJsonLayer = L.geoJson(data, style);
		buildingsMap.addLayer(geoJsonLayer);
	  });
	  $.getJSON("geojsons/buildings/Neustadt-Neuschoenefeld-2015-buildings.geojson", function(data) {
		var style = {
			weight: 2,
			color: 'purple',
			fillOpacity: 0.2
		}  
		var geoJsonLayer = L.geoJson(data, style);
		buildingsMap.addLayer(geoJsonLayer);
	  });
	  $.getJSON("geojsons/buildings/Neustadt-Neuschoenefeld-2014-buildings.geojson", function(data) {
		var style = {
			weight: 2,
			color: 'pink',
			fillOpacity: 0.2
		}  
		var geoJsonLayer = L.geoJson(data, style);
		buildingsMap.addLayer(geoJsonLayer);
	  });
     </script>
  </body>
</html>